PLUGINNAME = ChannelBox

INSTALL_PLUGIN := TRUE

UNAME_SYSTEM := $(shell uname -s)
ifeq ($(UNAME_SYSTEM), Darwin)
ENABLEMETAL := TRUE
OS = macOS
GPU = METAL
endif
ifeq ($(UNAME_SYSTEM), Linux)
ENABLECUDA := TRUE
OS = CentOS
GPU = CUDA
endif

DR_VERSION = DR17
CUDA_VERSION = 11.0

PLUGINOBJECTSCUDA = $(PLUGINNAME)PluginCUDA.o $(PLUGINNAME)CudaKernel.o
PLUGINOBJECTSMETAL = $(PLUGINNAME)PluginMETAL.o $(PLUGINNAME)MetalKernel.o
RESOURCES = BaldavengerOFX.$(PLUGINNAME).png

ifeq ($(ENABLECUDA), TRUE)
PLUGINOBJECTS = $(PLUGINOBJECTSCUDA)
endif

ifeq ($(ENABLEMETAL), TRUE)
PLUGINOBJECTS = $(PLUGINOBJECTSMETAL)
endif

PLUGINNAME_LG = $(PLUGINNAME).$(OS).$(DR_VERSION).$(GPU)

TOP_SRCDIR = ..
include $(TOP_SRCDIR)/Makefile.master